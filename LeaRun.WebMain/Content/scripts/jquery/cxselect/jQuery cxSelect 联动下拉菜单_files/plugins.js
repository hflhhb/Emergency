/* 该文件只保存各种插件或类库，实际调用请写在其他文件中
 *
 * 插件目录
 * throttle / debounce	节流
 * scrollTo				滚动位置插件
 * artTemplate			模板引擎
 * cxDialog				对话框
---------------------------------------- */


/*
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function(b,c){var $=b.jQuery||b.Cowboy||(b.Cowboy={}),a;$.throttle=a=function(e,f,j,i){var h,d=0;if(typeof f!=="boolean"){i=j;j=f;f=c}function g(){var o=this,m=+new Date()-d,n=arguments;function l(){d=+new Date();j.apply(o,n)}function k(){h=c}if(i&&!h){l()}h&&clearTimeout(h);if(i===c&&m>e){l()}else{if(f!==true){h=setTimeout(i?k:l,i===c?e-m:e)}}}if($.guid){g.guid=j.guid=j.guid||$.guid++}return g};$.debounce=function(d,e,f){return f===c?a(d,e,false):a(d,f,e!==false)}})(this);


/**
 * Copyright (c) 2007-2013 Ariel Flesler - aflesler<a>gmail<d>com | http://flesler.blogspot.com
 * Dual licensed under MIT and GPL.
 * @author Ariel Flesler
 * @version 1.4.6
 */
;(function($){var h=$.scrollTo=function(a,b,c){$(window).scrollTo(a,b,c)};h.defaults={axis:'xy',duration:parseFloat($.fn.jquery)>=1.3?0:1,limit:true};h.window=function(a){return $(window)._scrollable()};$.fn._scrollable=function(){return this.map(function(){var a=this,isWin=!a.nodeName||$.inArray(a.nodeName.toLowerCase(),['iframe','#document','html','body'])!=-1;if(!isWin)return a;var b=(a.contentWindow||a).document||a.ownerDocument||a;return/webkit/i.test(navigator.userAgent)||b.compatMode=='BackCompat'?b.body:b.documentElement})};$.fn.scrollTo=function(e,f,g){if(typeof f=='object'){g=f;f=0}if(typeof g=='function')g={onAfter:g};if(e=='max')e=9e9;g=$.extend({},h.defaults,g);f=f||g.duration;g.queue=g.queue&&g.axis.length>1;if(g.queue)f/=2;g.offset=both(g.offset);g.over=both(g.over);return this._scrollable().each(function(){if(e==null)return;var d=this,$elem=$(d),targ=e,toff,attr={},win=$elem.is('html,body');switch(typeof targ){case'number':case'string':if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(targ)){targ=both(targ);break}targ=$(targ,this);if(!targ.length)return;case'object':if(targ.is||targ.style)toff=(targ=$(targ)).offset()}$.each(g.axis.split(''),function(i,a){var b=a=='x'?'Left':'Top',pos=b.toLowerCase(),key='scroll'+b,old=d[key],max=h.max(d,a);if(toff){attr[key]=toff[pos]+(win?0:old-$elem.offset()[pos]);if(g.margin){attr[key]-=parseInt(targ.css('margin'+b))||0;attr[key]-=parseInt(targ.css('border'+b+'Width'))||0}attr[key]+=g.offset[pos]||0;if(g.over[pos])attr[key]+=targ[a=='x'?'width':'height']()*g.over[pos]}else{var c=targ[pos];attr[key]=c.slice&&c.slice(-1)=='%'?parseFloat(c)/100*max:c}if(g.limit&&/^\d+$/.test(attr[key]))attr[key]=attr[key]<=0?0:Math.min(attr[key],max);if(!i&&g.queue){if(old!=attr[key])animate(g.onAfterFirst);delete attr[key]}});animate(g.onAfter);function animate(a){$elem.animate(attr,f,g.easing,a&&function(){a.call(this,targ,g)})}}).end()};h.max=function(a,b){var c=b=='x'?'Width':'Height',scroll='scroll'+c;if(!$(a).is('html,body'))return a[scroll]-$(a)[c.toLowerCase()]();var d='client'+c,html=a.ownerDocument.documentElement,body=a.ownerDocument.body;return Math.max(html[scroll],body[scroll])-Math.min(html[d],body[d])};function both(a){return typeof a=='object'?a:{top:a,left:a}}})(jQuery);


/*!artTemplate - Template Engine*/
var template=function(a,b){return template["object"==typeof b?"render":"compile"].apply(template,arguments)};(function(a,b){"use strict";a.version="2.0.1",a.openTag="<%",a.closeTag="%>",a.isEscape=!0,a.isCompress=!1,a.parser=null,a.render=function(a,b){var c=d(a);return void 0===c?e({id:a,name:"Render Error",message:"No Template"}):c(b)},a.compile=function(b,d){function l(c){try{return new j(c)+""}catch(f){return h?(f.id=b||d,f.name="Render Error",f.source=d,e(f)):a.compile(b,d,!0)(c)}}var g=arguments,h=g[2],i="anonymous";"string"!=typeof d&&(h=g[1],d=g[0],b=i);try{var j=f(d,h)}catch(k){return k.id=b||d,k.name="Syntax Error",e(k)}return l.prototype=j.prototype,l.toString=function(){return""+j},b!==i&&(c[b]=l),l},a.helper=function(b,c){a.prototype[b]=c},a.onerror=function(a){var c="[template]:\n"+a.id+"\n\n[name]:\n"+a.name;a.message&&(c+="\n\n[message]:\n"+a.message),a.line&&(c+="\n\n[line]:\n"+a.line,c+="\n\n[source]:\n"+a.source.split(/\n/)[a.line-1].replace(/^[\s\t]+/,"")),a.temp&&(c+="\n\n[temp]:\n"+a.temp),b.console&&console.error(c)};var c={},d=function(d){var e=c[d];if(void 0===e&&"document"in b){var f=document.getElementById(d);if(f){var g=f.value||f.innerHTML;return a.compile(d,g.replace(/^\s*|\s*$/g,""))}}else if(c.hasOwnProperty(d))return e},e=function(b){function c(){return c+""}return a.onerror(b),c.toString=function(){return"{Template Error}"},c},f=function(){a.prototype={$render:a.render,$escape:function(a){return"string"==typeof a?a.replace(/&(?![\w#]+;)|[<>"']/g,function(a){return{"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"}[a]}):a},$string:function(a){return"string"==typeof a||"number"==typeof a?a:"function"==typeof a?a():""}};var b=Array.prototype.forEach||function(a,b){for(var c=this.length>>>0,d=0;c>d;d++)d in this&&a.call(b,this[d],d,this)},c=function(a,c){b.call(a,c)},d="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",e=/\/\*(?:.|\n)*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|'[^']*'|"[^"]*"|[\s\t\n]*\.[\s\t\n]*[$\w\.]+/g,f=/[^\w$]+/g,g=RegExp(["\\b"+d.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),h=/\b\d[^,]*/g,i=/^,+|,+$/g,j=function(a){return a=a.replace(e,"").replace(f,",").replace(g,"").replace(h,"").replace(i,""),a=a?a.split(/,+/):[]};return function(b,d){function w(b){return k+=b.split(/\n/).length-1,a.isCompress&&(b=b.replace(/[\n\r\t\s]+/g," ")),b=b.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n"),b=q[1]+"'"+b+"'"+q[2],b+"\n"}function x(b){var c=k;if(g?b=g(b):d&&(b=b.replace(/\n/g,function(){return k++,"$line="+k+";"})),0===b.indexOf("=")){var e=0!==b.indexOf("==");if(b=b.replace(/^=*|[\s;]*$/g,""),e&&a.isEscape){var f=b.replace(/\s*\([^\)]+\)/,"");m.hasOwnProperty(f)||/^(include|print)$/.test(f)||(b="$escape($string("+b+"))")}else b="$string("+b+")";b=q[1]+b+q[2]}return d&&(b="$line="+c+";"+b),y(b),b+"\n"}function y(a){a=j(a),c(a,function(a){l.hasOwnProperty(a)||(z(a),l[a]=!0)})}function z(a){var b;"print"===a?b=s:"include"===a?(n.$render=m.$render,b=t):(b="$data."+a,m.hasOwnProperty(a)&&(n[a]=m[a],b=0===a.indexOf("$")?"$helpers."+a:b+"===undefined?$helpers."+a+":"+b)),o+=a+"="+b+","}var e=a.openTag,f=a.closeTag,g=a.parser,h=b,i="",k=1,l={$data:!0,$helpers:!0,$out:!0,$line:!0},m=a.prototype,n={},o="var $helpers=this,"+(d?"$line=0,":""),p="".trim,q=p?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],r=p?"if(content!==undefined){$out+=content;return content}":"$out.push(content);",s="function(content){"+r+"}",t="function(id,data){if(data===undefined){data=$data}var content=$helpers.$render(id,data);"+r+"}";c(h.split(e),function(a){a=a.split(f);var c=a[0],d=a[1];1===a.length?i+=w(c):(i+=x(c),d&&(i+=w(d)))}),h=i,d&&(h="try{"+h+"}catch(e){"+"e.line=$line;"+"throw e"+"}"),h="'use strict';"+o+q[0]+h+"return new String("+q[3]+")";try{var u=Function("$data",h);return u.prototype=n,u}catch(v){throw v.temp="function anonymous($data) {"+h+"}",v}}}()})(template,this),"function"==typeof define?define(function(a,b,c){c.exports=template}):"undefined"!=typeof exports&&(module.exports=template);


/*!
 * cxDialog 1.2
 * http://code.ciaoca.com/
 * https://github.com/ciaoca/cxDialog
 * E-mail: ciaoca@gmail.com
 * Released under the MIT license
 * Date: 2013-09-11
 *
 * 简易调用：cxDialog(string)
 * 完整方法：cxDialog(opt,[ok,no])
 * opt 对象参数：
 * title	[string]				标题
 * info		[string|dom|jqselect]	内容
 * ok		[fn]					点击确认时的回调函数
 * okVal	[string]				确认按钮显示的文字
 * no		[fn]					点击取消时的回调函数
 * noVal	[string]				取消按钮显示的文字
 * btn		[array]					自定义按钮：[{val:"text",callback:fn},...]
 * lock		[string|boolean]		自定义锁定背景颜色
 * closed	[boolean]				是否显示关闭按钮
 * width	[int]					提示框固定宽度
 * height	[int]					提示框固定高度
 */
!function(){var a,b,c=!!window.ActiveXObject&&!window.XMLHttpRequest,d={box:null,overlay:null,holder:null,title:$("<div></div>",{"class":"title"}),closed:$("<a></a>",{"class":"close"}),info:null,btns:$("<div></div>",{"class":"btns"}),defaults:{title:"",info:"",ok:null,okVal:"确 定",no:null,noVal:"取 消",btn:[],lock:"",closed:!0,width:0,height:0},fn:{debug:function(a){window.console&&window.console.log&&console.log(a)},isElement:function(a){return a&&("function"==typeof HTMLElement||"object"==typeof HTMLElement)&&a instanceof HTMLElement?!0:a&&a.nodeType&&1===a.nodeType?!0:!1},isJquery:function(a){return a&&("function"==typeof jQuery||"object"==typeof jQuery)&&a instanceof jQuery?!0:!1}}};d.fn.init=function(c,e,f){if("string"==typeof c&&!c.length)return d.fn.exit(),d.fn.debug("未设置内容"),!1;if("string"==typeof c||d.fn.isElement(c)||d.fn.isJquery(c))c={info:c};else if("object"!=typeof c)return d.fn.exit(),d.fn.debug("无显示对象或内容，或对象不存在"),!1;"function"==typeof e&&(c.ok=e),"function"==typeof f&&(c.no=f),c=$.extend({},d.defaults,c),a=$("html"),b=$("body"),d.box=document.getElementById("cxdialog")?$("#cxdialog").addClass("cxdialog"):$("<div></div>",{id:"cxdialog","class":"cxdialog"}),d.overlay=document.getElementById("cxdialog_overlay")?$("#cxdialog_overlay").addClass("cxdialog_overlay"):$("<div></div>",{id:"cxdialog_overlay","class":"cxdialog_overlay"}),d.holder=document.getElementById("cxdialog_holder")?$("#cxdialog_holder").addClass("cxdialog_holder"):$("<div></div>",{id:"cxdialog_holder","class":"cxdialog_holder"}),d.fn.exit(),d.fn.setContent(c),d.fn.show(c)},d.fn.backDom=function(){var b,a=d.holder.data("dom");"string"==typeof a&&a.length&&(b=$("#"+a),b.css({"float":"",display:"",visibility:""}).insertAfter(d.holder),d.holder.data("dom","").remove())},d.fn.setContent=function(a){var b,c,e,f,g,h,i;for(a.title.length&&d.title.html(a.title).appendTo(d.box),a.closed&&d.closed.appendTo(d.box),"string"==typeof a.info?d.info=$("<div></div>",{"class":"info"}).html(a.info).appendTo(d.box):(d.fn.isElement(a.info)||d.fn.isJquery(a.info))&&(d.fn.isElement(a.info)&&(a.info=$(a.info)),b=a.info.attr("id"),"string"==typeof b&&b.length||(b="cidalog_"+(new Date).getTime()),c=a.info.css("float"),e=a.info.css("display"),f=a.info.css("visibility"),d.holder.css({"float":c,display:e,visibility:f,width:a.info.outerWidth(),height:a.info.outerHeight()}).data({dom:b,"float":c,display:e,visibility:f}).insertAfter(a.info),a.info.show().appendTo(d.box)),g=[],a.ok&&g.push({val:a.okVal,callback:a.ok}),a.no&&g.push({val:a.noVal,callback:a.no}),h="",i=0;i<g.length;i++)h+="<button data-id='"+i+"' class='awesome blue' type='button'>"+g[i].val+"</button>";d.btns.html(h).appendTo(d.box),d.closed.bind("click",function(){d.fn.exit()}),d.box.undelegate("button","click"),g.length&&d.box.delegate("button","click",function(){var a=$(this);d.fn.exit(),g[a.data("id")].callback()})},d.fn.show=function(a){a.lock&&d.fn.mask(a.lock),c&&d.box.css("top",document.documentElement.scrollTop+window.screen.availHeight/4),a.width>0&&d.box.css({width:a.width,marginLeft:-(a.width/2)}),a.height>0&&d.box.css("height",a.height),d.box.appendTo(b).fadeIn(300)},d.fn.exit=function(){d.fn.backDom(),d.box.empty().hide(),d.overlay.hide(),a.removeClass("cxdialog_lock")},d.fn.mask=function(c){c=c===!0?"#fff":c,c===!0&&(c="#ffffff"),d.overlay.css("background-color",c).appendTo(b).show(),a.addClass("cxdialog_lock")},window.cxDialog=d.fn.init}();